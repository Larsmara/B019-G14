{"remainingRequest":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.2-test/node_modules/babel-loader/lib/index.js!/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.2-test/src/auth.js","dependencies":[{"path":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.2-test/src/auth.js","mtime":1553982883863},{"path":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.2-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.2-test/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.for-each\";\nimport firebase from '@/firebase';\nimport db from '@/db';\nimport store from './store/index';\nimport moment from 'moment';\nfirebase.auth().onAuthStateChanged(function (user) {\n  if (user) {\n    if (user.user) {\n      user = user.user;\n    }\n\n    var setUser = {\n      id: user.uid\n    };\n    db.collection('users').doc(setUser.id).set(setUser);\n    db.collection('users').where('userId', '==', user.uid).get().then(function (snapshot) {\n      snapshot.forEach(function (doc) {\n        console.log(doc.data().email);\n        setUser.email = doc.data().email, setUser.name = doc.data().name, setUser.phone = doc.data().phone, setUser.admin = doc.data().isAdmin, setUser.joined = moment(doc.data().joined).format('LL'), setUser.slug = doc.data().slug;\n      });\n    });\n    store.commit('auth/setUser', setUser);\n  } else {\n    store.commit('auth/setUser', null);\n  }\n});",{"version":3,"sources":["/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.2-test/src/auth.js"],"names":["firebase","db","store","moment","auth","onAuthStateChanged","user","setUser","id","uid","collection","doc","set","where","get","then","snapshot","forEach","console","log","data","email","name","phone","admin","isAdmin","joined","format","slug","commit"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,YAArB;AACA,OAAOC,EAAP,MAAe,MAAf;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEAH,QAAQ,CAACI,IAAT,GAAgBC,kBAAhB,CAAmC,UAACC,IAAD,EAAU;AAEzC,MAAGA,IAAH,EAAQ;AACJ,QAAGA,IAAI,CAACA,IAAR,EAAa;AACTA,MAAAA,IAAI,GAAGA,IAAI,CAACA,IAAZ;AACH;;AACD,QAAMC,OAAO,GAAI;AACbC,MAAAA,EAAE,EAAEF,IAAI,CAACG;AADI,KAAjB;AAIAR,IAAAA,EAAE,CAACS,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BJ,OAAO,CAACC,EAAnC,EAAuCI,GAAvC,CAA2CL,OAA3C;AACAN,IAAAA,EAAE,CAACS,UAAH,CAAc,OAAd,EAAuBG,KAAvB,CAA6B,QAA7B,EAAuC,IAAvC,EAA6CP,IAAI,CAACG,GAAlD,EAAuDK,GAAvD,GACCC,IADD,CACM,UAAAC,QAAQ,EAAI;AACdA,MAAAA,QAAQ,CAACC,OAAT,CAAiB,UAAAN,GAAG,EAAI;AACpBO,QAAAA,OAAO,CAACC,GAAR,CAAYR,GAAG,CAACS,IAAJ,GAAWC,KAAvB;AACAd,QAAAA,OAAO,CAACc,KAAR,GAAgBV,GAAG,CAACS,IAAJ,GAAWC,KAA3B,EACAd,OAAO,CAACe,IAAR,GAAeX,GAAG,CAACS,IAAJ,GAAWE,IAD1B,EAEAf,OAAO,CAACgB,KAAR,GAAgBZ,GAAG,CAACS,IAAJ,GAAWG,KAF3B,EAGAhB,OAAO,CAACiB,KAAR,GAAgBb,GAAG,CAACS,IAAJ,GAAWK,OAH3B,EAIAlB,OAAO,CAACmB,MAAR,GAAiBvB,MAAM,CAACQ,GAAG,CAACS,IAAJ,GAAWM,MAAZ,CAAN,CAA0BC,MAA1B,CAAiC,IAAjC,CAJjB,EAKApB,OAAO,CAACqB,IAAR,GAAejB,GAAG,CAACS,IAAJ,GAAWQ,IAL1B;AAMH,OARD;AAUH,KAZD;AAaA1B,IAAAA,KAAK,CAAC2B,MAAN,CAAa,cAAb,EAA6BtB,OAA7B;AACH,GAvBD,MAuBO;AACHL,IAAAA,KAAK,CAAC2B,MAAN,CAAa,cAAb,EAA6B,IAA7B;AACH;AACJ,CA5BD","sourcesContent":["import firebase from '@/firebase'\nimport db from '@/db'\nimport store from './store/index'\nimport moment from 'moment'\n\nfirebase.auth().onAuthStateChanged((user) => {\n    \n    if(user){\n        if(user.user){\n            user = user.user\n        }\n        const setUser =  {\n            id: user.uid,\n        }\n            \n        db.collection('users').doc(setUser.id).set(setUser)\n        db.collection('users').where('userId', '==', user.uid).get()\n        .then(snapshot => {\n            snapshot.forEach(doc => {\n                console.log(doc.data().email)\n                setUser.email = doc.data().email,\n                setUser.name = doc.data().name,\n                setUser.phone = doc.data().phone,\n                setUser.admin = doc.data().isAdmin,\n                setUser.joined = moment(doc.data().joined).format('LL'),\n                setUser.slug = doc.data().slug\n            })\n            \n        })\n        store.commit('auth/setUser', setUser)\n    } else {\n        store.commit('auth/setUser', null)\n    }\n})"]}]}