{"remainingRequest":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/thread-loader/dist/cjs.js!/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/babel-loader/lib/index.js!/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/vuetify-loader/lib/loader.js!/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/src/components/User/LoginComp.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/src/components/User/LoginComp.vue","mtime":1552581935944},{"path":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/cache-loader/dist/cjs.js","mtime":1552476695799},{"path":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/thread-loader/dist/cjs.js","mtime":1552476699117},{"path":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/babel-loader/lib/index.js","mtime":1552476695677},{"path":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/vuetify-loader/lib/loader.js","mtime":1552476699349},{"path":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/cache-loader/dist/cjs.js","mtime":1552476695799},{"path":"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/vue-loader/lib/index.js","mtime":1552476699239}],"contextDependencies":[],"result":["import _Date$now from \"/Users/lars-martin/dev/Bacheloroppgave/B019-G14/v2.1/node_modules/@babel/runtime-corejs2/core-js/date/now\";\nimport \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport slugify from 'slugify';\nimport firebase from 'firebase';\nimport { setTimeout } from 'timers';\nexport default {\n  name: 'Login',\n  data: function data() {\n    return {\n      loginComp: false,\n      active: null,\n      dialog2: false,\n      loginDialog: false,\n      registerDialog: false,\n      personvern: false,\n      email: null,\n      fname: null,\n      ename: null,\n      phone: null,\n      slug: null,\n      password: null,\n      confirmPassord: null,\n      emailReset: null,\n      feedback: null\n    };\n  },\n  computed: {\n    loading: function loading() {\n      return this.$store.getters.loading;\n    },\n    error: function error() {\n      return this.$store.getters.error;\n    },\n    user: function user() {\n      return this.$store.getters.user;\n    }\n  },\n  methods: {\n    login: function login() {\n      this.$store.dispatch('signUserIn', {\n        email: this.email,\n        password: this.password\n      });\n    },\n    loginDialog: function (_loginDialog) {\n      function loginDialog() {\n        return _loginDialog.apply(this, arguments);\n      }\n\n      loginDialog.toString = function () {\n        return _loginDialog.toString();\n      };\n\n      return loginDialog;\n    }(function () {\n      registerDialog = false;\n      loginDialog = true;\n    }),\n    registerDialog: function (_registerDialog) {\n      function registerDialog() {\n        return _registerDialog.apply(this, arguments);\n      }\n\n      registerDialog.toString = function () {\n        return _registerDialog.toString();\n      };\n\n      return registerDialog;\n    }(function () {\n      loginDialog = false;\n      registerDialog = true;\n    }),\n    onDismissed: function onDismissed() {\n      this.$store.dispatch('clearError');\n    },\n    register: function register() {\n      this.slug = slugify(this.fname + ' ' + this.ename, {\n        replacement: '-',\n        remove: /[$*_+~.()'\"!\\._@]/g,\n        lower: true\n      });\n      var userData = {\n        email: this.email,\n        name: this.fname + ' ' + this.ename,\n        phone: this.phone,\n        slug: this.slug,\n        gdpr: this.personvern,\n        joined: _Date$now()\n      };\n      this.$store.dispatch('signUserUp', {\n        email: this.email,\n        passord: this.password,\n        user: userData\n      });\n    },\n    glemtPassord: function glemtPassord() {\n      var _this = this;\n\n      console.log('Glemt passord');\n      console.log(this.emailReset);\n      var melding = this.feedback;\n      firebase.auth().sendPasswordResetEmail(this.emailReset).then(function () {\n        console.log('Sendt');\n        _this.feedback = 'En epost er sendt';\n      }).catch(function (error) {\n        _this.feedback = error.message;\n      });\n      setTimeout(function () {\n        return _this.dialog2 = false;\n      }, 4000);\n    }\n  },\n  watch: {\n    user: function user(value) {\n      if (value !== null && value !== undefined) {//this.$router.push('/')\n      }\n    }\n  }\n};",{"version":3,"sources":["LoginComp.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA,OAAA,OAAA,MAAA,SAAA;AACA,OAAA,QAAA,MAAA,UAAA;AACA,SAAA,UAAA,QAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,KADA;AAEA,MAAA,MAAA,EAAA,IAFA;AAGA,MAAA,OAAA,EAAA,KAHA;AAIA,MAAA,WAAA,EAAA,KAJA;AAKA,MAAA,cAAA,EAAA,KALA;AAMA,MAAA,UAAA,EAAA,KANA;AAOA,MAAA,KAAA,EAAA,IAPA;AAQA,MAAA,KAAA,EAAA,IARA;AASA,MAAA,KAAA,EAAA,IATA;AAUA,MAAA,KAAA,EAAA,IAVA;AAWA,MAAA,IAAA,EAAA,IAXA;AAYA,MAAA,QAAA,EAAA,IAZA;AAaA,MAAA,cAAA,EAAA,IAbA;AAcA,MAAA,UAAA,EAAA,IAdA;AAeA,MAAA,QAAA,EAAA;AAfA,KAAA;AAiBA,GApBA;AAqBA,EAAA,QAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,OAAA;AACA,KAHA;AAIA,IAAA,KAJA,mBAIA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,KAAA;AACA,KANA;AAOA,IAAA,IAPA,kBAOA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,IAAA;AACA;AATA,GArBA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AAAA,QAAA,KAAA,EAAA,KAAA,KAAA;AAAA,QAAA,QAAA,EAAA,KAAA;AAAA,OAAA;AACA,KAHA;AAIA,IAAA,WAJA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,kBAIA;AACA,MAAA,cAAA,GAAA,KAAA;AACA,MAAA,WAAA,GAAA,IAAA;AACA,KAPA;AAQA,IAAA,cARA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,kBAQA;AACA,MAAA,WAAA,GAAA,KAAA;AACA,MAAA,cAAA,GAAA,IAAA;AACA,KAXA;AAYA,IAAA,WAZA,yBAYA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,YAAA;AACA,KAdA;AAeA,IAAA,QAfA,sBAeA;AACA,WAAA,IAAA,GAAA,OAAA,CAAA,KAAA,KAAA,GAAA,GAAA,GAAA,KAAA,KAAA,EAAA;AACA,QAAA,WAAA,EAAA,GADA;AAEA,QAAA,MAAA,EAAA,oBAFA;AAGA,QAAA,KAAA,EAAA;AAHA,OAAA,CAAA;AAMA,UAAA,QAAA,GAAA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,IAAA,EAAA,KAAA,KAAA,GAAA,GAAA,GAAA,KAAA,KAFA;AAGA,QAAA,KAAA,EAAA,KAAA,KAHA;AAIA,QAAA,IAAA,EAAA,KAAA,IAJA;AAKA,QAAA,IAAA,EAAA,KAAA,UALA;AAMA,QAAA,MAAA,EAAA;AANA,OAAA;AAQA,WAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA;AAAA,QAAA,KAAA,EAAA,KAAA,KAAA;AAAA,QAAA,OAAA,EAAA,KAAA,QAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA,KA/BA;AAgCA,IAAA,YAhCA,0BAgCA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,eAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,UAAA;AACA,UAAA,OAAA,GAAA,KAAA,QAAA;AACA,MAAA,QAAA,CAAA,IAAA,GAAA,sBAAA,CAAA,KAAA,UAAA,EAAA,IAAA,CAAA,YAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,mBAAA;AACA,OAHA,EAGA,KAHA,CAGA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,KAAA,CAAA,OAAA;AACA,OALA;AAMA,MAAA,UAAA,CAAA;AAAA,eAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AAAA,OAAA,EAAA,IAAA,CAAA;AACA;AA3CA,GAhCA;AA6EA,EAAA,KAAA,EAAA;AACA,IAAA,IADA,gBACA,KADA,EACA;AACA,UAAA,KAAA,KAAA,IAAA,IAAA,KAAA,KAAA,SAAA,EAAA,CACA;AACA;AACA;AALA;AA7EA,CAAA","sourcesContent":["<template>\n<div>\n    <v-dialog width=\"500px\" v-model=\"loginComp\">\n        <!-- <v-btn slot=\"activator\" class=\"primary login-btn\" flat>\n        <v-icon>lock_open</v-icon>\n        Logg inn / registrer deg\n        </v-btn> -->\n        <a slot=\"activator\" flat>Logg inn / registrer deg</a>\n    <v-card>\n        <v-container>\n        <v-layout row wrap>\n            <v-flex s12>\n                <v-card-title >Halden - Smart City</v-card-title>\n            </v-flex>\n        </v-layout>\n        \n        <v-tabs v-model=\"active\" slider-color=\"primary\" >\n          <v-tab  ripple >\n            Logg inn\n          </v-tab>\n          <v-tab :key=\"2\" ripple >\n            Registrer deg\n          </v-tab>\n\n          <v-tab-item >\n            <v-card flat>\n              <v-card-text>\n                <form @submit.prevent=\"login\">\n                <div class=\"field\">\n                    <label for=\"email\">E-post</label>\n                    <input type=\"email\" name=\"email\" v-model=\"email\" required>\n                </div>\n                <div class=\"field\">\n                    <label for=\"password\">Passord</label>\n                    <input type=\"password\" name=\"password\" v-model=\"password\" required>\n                </div>\n                <div class=\"field center\">\n                    <v-btn class=\"btn primary\" large type=\"submit\" :disabled=\"loading\" :loading=\"loading\">\n                    Logg inn\n                    <span slot=\"loader\" class=\"custom-loader\"><v-icon light>cached</v-icon></span>\n                    </v-btn>\n                </div>\n                <div class=\"field center mt-2\">\n                    <a @click=\"dialog2 = !dialog2\">Glemt passord?</a>\n                </div>\n                </form>\n              </v-card-text>\n            </v-card>\n          </v-tab-item>\n\n          <v-tab-item :key=\"2\" >\n            <v-card flat>\n              <v-card-text>\n                    <form @submit.prevent=\"register\">\n                        <div class=\"field\">\n                            <label for=\"email\">E-post</label>\n                            <input type=\"email\" name=\"email\" v-model=\"email\" required>\n                        </div>\n                        <div class=\"field\">\n                            <label for=\"fname\">Fornavn</label>\n                            <input type=\"text\" name=\"fname\" v-model=\"fname\" required>\n                        </div>\n                        <div class=\"field\">\n                            <label for=\"ename\">Etternavn</label>\n                            <input type=\"text\" name=\"ename\" v-model=\"ename\" required>\n                        </div>\n                        <div class=\"field\">\n                            <label for=\"phone\">Telefonnummer</label>\n                            <input type=\"number\" name=\"phone\" pattern=\"\\+[0-9\\s\\-\\(\\)]+\" v-model=\"phone\" required>\n                        </div>\n                        <div class=\"field\">\n                            <label for=\"password\">Passord</label>\n                            <input type=\"password\" name=\"password\" v-model=\"password\" required>\n                        </div>\n                        <div class=\"field\" >\n                            <label for=\"password\">Confirm passord</label>\n                            <input type=\"password\" name=\"password\"  required>\n                        </div>\n                        <div class=\"field\">\n                        <label>\n                            <input type=\"checkbox\" v-model=\"personvern\" required/>\n                            <span>Ved Ã¥ godta bla bla bla..... Lagring av persondata...</span>\n                        </label>\n                        </div>\n                        <div id=\"recaptcha-container\"></div>\n                        <div class=\"field center\">\n                            <v-btn class=\"primary\" @click=\"loginComp = false\">Avbryt</v-btn>\n                            <v-btn class=\"btn primary\" type=\"submit\" :disabled=\"loading\" :loading=\"loading\">\n                            Registrer deg\n                            <span slot=\"loader\" class=\"custom-loader\"><v-icon light>cached</v-icon></span>\n                            </v-btn>\n                        </div>\n                    </form>\n              </v-card-text>\n            </v-card>\n          </v-tab-item>\n        </v-tabs>\n    </v-container>\n    </v-card>\n</v-dialog>\n\n<v-dialog v-model=\"dialog2\" max-width=\"500px\">\n    <div class=\"container\">\n    <v-card>\n        <v-container>\n        <v-card-title>\n        Nullstill passord\n        </v-card-title>\n\n         <v-alert type=\"success\" dismissible :value=\"true\" v-if=\"feedback\">\n            {{ feedback }}\n        </v-alert>\n\n        <v-card-text>\n            <form @submit.prevent=\"glemtPassord\">\n                <div class=\"field\">\n                    <label for=\"email\">E-post</label>\n                    <input type=\"email\" name=\"email\" v-model=\"emailReset\" >\n                </div>\n                <div class=\"field center\">\n                    <v-btn class=\"btn primary\" large type=\"submit\" :disabled=\"loading\" :loading=\"loading\">\n                    Reset passord\n                    <span slot=\"loader\" class=\"custom-loader\"><v-icon light>cached</v-icon></span>\n                    </v-btn>\n                </div>\n            </form>\n        </v-card-text>\n        <v-card-actions>\n        <v-btn color=\"primary\" flat @click=\"dialog2=false\">Avbryt</v-btn>\n        </v-card-actions>\n        </v-container>\n    </v-card>\n    </div>\n</v-dialog>\n\n</div>\n</template>\n\n<script>\nimport slugify from 'slugify'\nimport firebase from 'firebase'\nimport { setTimeout } from 'timers';\n\nexport default {\n    name: 'Login',\n    data(){\n        return{\n            loginComp: false,\n            active: null,\n            dialog2: false,\n            loginDialog: false,\n            registerDialog: false,\n            personvern: false,\n            email: null,\n            fname: null,\n            ename: null,\n            phone: null,\n            slug: null,\n            password: null,\n            confirmPassord: null,\n            emailReset: null,\n            feedback: null,\n        }\n    },\n    computed: {\n        loading(){\n            return this.$store.getters.loading\n        },\n        error(){\n            return this.$store.getters.error\n        },\n        user(){\n            return this.$store.getters.user\n        }\n    },\n    methods: {\n        login(){      \n            this.$store.dispatch('signUserIn', {email: this.email, password: this.password})\n        },\n        loginDialog(){\n            registerDialog = false\n            loginDialog = true\n        },\n        registerDialog(){\n            loginDialog = false\n            registerDialog = true\n        },\n        onDismissed(){\n            this.$store.dispatch('clearError')\n        },\n        register(){\n            this.slug = slugify(this.fname + ' ' + this.ename, {\n            replacement: '-',\n            remove: /[$*_+~.()'\"!\\._@]/g,\n            lower: true\n            })\n\n            const userData = {\n                email: this.email,\n                name: this.fname + ' ' + this.ename,\n                phone: this.phone,\n                slug: this.slug,\n                gdpr: this.personvern,\n                joined: Date.now()\n            }\n            this.$store.dispatch('signUserUp', {email: this.email, passord: this.password, user: userData})\n        },\n        glemtPassord(){\n            console.log('Glemt passord')\n            console.log(this.emailReset)\n            let melding = this.feedback\n            firebase.auth().sendPasswordResetEmail(this.emailReset).then(() => {\n                console.log('Sendt')\n                this.feedback = 'En epost er sendt'\n            }).catch(error => {\n                this.feedback = error.message\n            })\n            setTimeout(() => (this.dialog2 = false), 4000)\n        }\n    },\n    watch: {\n        user(value){\n            if(value !== null && value !== undefined){\n            //this.$router.push('/')\n            }\n        }\n    }\n}\n</script>\n\n<style>\n\n.login{\n    max-width: 25%;\n    margin-top: 3rem;\n}\n\n.login .field{\n    margin-bottom: 1.6rem;\n}\n\n.reset{\n    margin-left: 5px;\n}\n\n.custom-loader {\n    animation: loader 1s infinite;\n    display: flex;\n  }\n  @-moz-keyframes loader {\n    from {\n      transform: rotate(0);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n  @-webkit-keyframes loader {\n    from {\n      transform: rotate(0);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n  @-o-keyframes loader {\n    from {\n      transform: rotate(0);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n  @keyframes loader {\n    from {\n      transform: rotate(0);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n</style>"],"sourceRoot":"src/components/User"}]}